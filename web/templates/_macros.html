{# web/templates/_macros.html #}

{% macro target_selector(id_prefix, name='target', placeholder='Sélectionner ou entrer une cible...', recent_targets=None) %}
<div class="target-selector" id="target-selector-{{ id_prefix }}">
    <input type="text" name="{{ name }}" id="target-input-{{ id_prefix }}"
           class="w-full px-4 py-2 bg-[#111] border border-[#333] rounded focus:ring-[var(--tsar-accent)]"
           placeholder="{{ placeholder }}"
           autocomplete="off">
    <div class="target-dropdown hidden" id="target-dropdown-{{ id_prefix }}">
      <input type="text" class="target-dropdown-search" 
             id="target-search-{{ id_prefix }}" placeholder="Rechercher...">
      <div class="target-options-list">
        
        {% if recent_targets %}
        <div class="target-dropdown-group">Cibles Récentes</div>
        {% for target in recent_targets %}
        <div class="target-dropdown-item" data-value="{{ target }}">{{ target }}</div>
        {% endfor %}
        {% endif %}

        <div class="target-dropdown-group">Tests Locaux</div>
        <div class="target-dropdown-item" data-value="127.0.0.1">127.0.0.1 <small>Localhost</small></div>

        <div class="target-dropdown-group">Passerelles Communes</div>
        <div class="target-dropdown-item" data-value="192.168.1.1">192.168.1.1</div>
        <div class="target-dropdown-item" data-value="192.168.0.1">192.168.0.1</div>
        <div class="target-dropdown-item" data-value="192.168.1.254">192.168.1.254</div>
        <div class="target-dropdown-item" data-value="10.0.0.1">10.0.0.1</div>
        
        <div class="target-dropdown-group">Réseaux Domestiques / SOHO</div>
        <div class="target-dropdown-item" data-value="192.168.1.0/24">192.168.1.0/24</div>
        <div class="target-dropdown-item" data-value="192.168.0.0/24">192.168.0.0/24</div>
        
        <div class="target-dropdown-group">Réseaux d'Entreprise (172.16.x.x)</div>
        <div class="target-dropdown-item" data-value="172.16.0.0/12">172.16.0.0/12 <small>Tout le bloc privé</small></div>
        <div class="target-dropdown-item" data-value="172.17.0.0/16">172.17.0.0/16 <small>Réseau Docker par défaut</small></div>

        <div class="target-dropdown-group">Grands Réseaux (10.x.x.x)</div>
        <div class="target-dropdown-item" data-value="10.0.0.0/8">10.0.0.0/8 <small>Tout le bloc privé</small></div>
        <div class="target-dropdown-item" data-value="10.10.10.0/24">10.10.10.0/24 <small>Exemple de VLAN</small></div>

      </div>
    </div>
  </div>
{% endmacro %}
